{% extends "layout_base.html" %}
{% block title %}Dep√≥sito {{ deposito.codigo }}{% endblock %}
{% block content %}
  <a href="/">‚Üê Voltar</a>
  <h1>Dep√≥sito {{ deposito.codigo }}</h1>

  <h2>Fornecedores</h2>
  
  <!-- Barra de pesquisa -->
  <div style="margin-bottom: 20px;">
    <input type="text" id="searchInput" placeholder="üîç Buscar fornecedor..." 
           style="width: 100%; max-width: 500px; padding: 10px; border: 2px solid #ddd; border-radius: 8px; font-size: 16px;">
  </div>

  {% if fornecedores %}
    <ul class="forn-list" id="fornList">
      {% for f in fornecedores %}
        <li class="forn-item" data-name="{{ f.nome|lower }}">
          <a href="/deposito/{{ deposito.codigo }}/fornecedor/{{ f.nome }}">
            <strong>{{ f.nome }}</strong>
            {% if f.caixas_count > 0 %}
              <span style="color: #666; font-size: 14px;"> ({{ f.caixas_count }} caixa{% if f.caixas_count != 1 %}s{% endif %})</span>
            {% endif %}
          </a>
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p>Nenhum fornecedor cadastrado.</p>
  {% endif %}
  
  <p><a href="/logout">Sair</a></p>

  <script>
    // Filtro de pesquisa em tempo real
    document.getElementById('searchInput').addEventListener('input', function(e) {
      const searchTerm = e.target.value.toLowerCase();
      const items = document.querySelectorAll('.forn-item');
      
      items.forEach(item => {
        const name = item.getAttribute('data-name');
        if (name.includes(searchTerm)) {
          item.style.display = '';
        } else {
          item.style.display = 'none';
        }
      });
    });
  </script>
{% endblock %}